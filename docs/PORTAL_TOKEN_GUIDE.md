# Portal Token Generation Guide

## What is a "Portal User Token"?

Despite the name "Generate User Token", this feature creates a **username/password pair** (not a single token). This is a dedicated credential set for API/publishing access, separate from your account login.

## How to Generate

1. Go to <https://central.sonatype.com/>
2. Log in with your account
3. Click your username (top right) → **View Account**
4. Click **Generate User Token**

## What You'll Get

When you click "Generate User Token", you'll see:

```
Username: abc123xyz
Password: very-long-random-string-here-1234567890abcdef
```

Both values are generated - you don't choose them.

## How to Use in Gradle

Add these to `~/.gradle/gradle.properties`:

```properties
centralUsername=abc123xyz
centralToken=very-long-random-string-here-1234567890abcdef
```

**Important:**
- `centralUsername` = the generated **username** (NOT your account username)
- `centralToken` = the generated **password** (NOT your account password)
- We call it "token" in the property name, but it's actually the password from the pair

## How to Use in GitHub Secrets

When adding secrets to GitHub Actions:

| Secret Name | Value | What to Put |
|------------|-------|-------------|
| `CENTRAL_USERNAME` | `abc123xyz` | The username from the token pair |
| `CENTRAL_TOKEN` | `very-long-random-string...` | The password from the token pair |

## Example Output from Portal

When you generate a token, the Portal shows something like:

```xml
<server>
  <id>central</id>
  <username>abc123xyz</username>
  <password>VeryLongRandomString1234567890abcdefghijklmnopqrstuvwxyz</password>
</server>
```

Or in a dialog box:

```
Username: abc123xyz
Password: VeryLongRandomString1234567890abcdefghijklmnopqrstuvwxyz

[Copy to clipboard] [Close]
```

## Common Mistakes

❌ **Wrong:** Using your account username/password
```properties
centralUsername=myemail@example.com  # WRONG
centralToken=myAccountPassword       # WRONG
```

✅ **Correct:** Using the generated token username/password
```properties
centralUsername=abc123xyz                                    # Token username
centralToken=VeryLongRandomString1234567890abcdefghijklmno  # Token password
```

## Security Notes

- Store these credentials securely (like any password)
- The token username/password are separate from your account login
- You can generate multiple tokens if needed
- You can revoke tokens in the Portal if compromised
- Never commit these to Git (use `~/.gradle/gradle.properties` or GitHub Secrets)

## Revoke/Regenerate

If you need to revoke or regenerate:

1. Go to <https://central.sonatype.com/>
2. Click your username → **View Account**
3. You'll see your active tokens listed
4. Click **Revoke** to remove a token
5. Click **Generate User Token** to create a new one

## Summary

**Portal Token = Username + Password pair**

- Generated by Portal (you don't choose them)
- Used for API/publishing authentication
- Separate from your account credentials
- Both parts are long random strings
- The "password" part is very long (60+ characters)

---

See also: <https://central.sonatype.org/publish/generate-portal-token/>

